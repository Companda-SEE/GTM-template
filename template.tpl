___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Companda SEE API template",
  "categories": ["LEAD_GENERATION", "PERSONALIZATION", "SALES", "MARKETING"],
  "brand": {
    "id": "brand_dummy",
    "displayName": "Custom Template",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "Template for the implementation of the Companda SEE API allowing for flexible integration and always staying up to date with the latest version. For more info see portal.companda.com.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "compandaPublicKey",
    "displayName": "SEE API Public Key",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "help": "The Public API key, create this in the Companda portal at portal.companda.com"
  },
  {
    "type": "SELECT",
    "name": "compandaAPIendpoint",
    "displayName": "Companda API endpoint (version)",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "https://plugins.companda.com/v1/general/",
        "displayValue": "SEE API v1"
      }
    ],
    "simpleValueType": true,
    "defaultValue": "https://plugins.companda.com/v1/general/"
  },
  {
    "type": "CHECKBOX",
    "name": "debug",
    "checkboxText": "Show debug info in console",
    "simpleValueType": true
  },
  {
    "type": "CHECKBOX",
    "name": "FireDataReadyEvent",
    "checkboxText": "Fire a \u0027Companda dataLayer Ready\u0027 event",
    "simpleValueType": true,
    "help": "If you are using for example Google Optimize to run experiments or if you are integrating with a third party, you can send an event from this tag to tell your next step the data is ready to be used. This checkbox allows for the \u0027Companda dataLayer ready\u0027 event to become available in the dataLayer."
  },
  {
    "type": "CHECKBOX",
    "name": "FireGAplugin",
    "checkboxText": "Send data to Googly Analytics",
    "simpleValueType": true,
    "help": "This checbox tells the tag to send data to your Google Analytics. When checked you need to configure the fields below."
  },
  {
    "type": "TEXT",
    "name": "UAtrackingID",
    "displayName": "UA Tracking ID",
    "simpleValueType": true,
    "help": "Enter the Google Analytics tracking ID to send data to."
  },
  {
    "type": "GROUP",
    "name": "compandaGAcustomDimensions",
    "displayName": "Companda GA custom dimensions",
    "groupStyle": "ZIPPY_CLOSED",
    "subParams": [
      {
        "type": "TEXT",
        "name": "GA_compandaCompanyName",
        "displayName": "Companda Company Name",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ],
        "valueHint": "1",
        "help": "The value must be an integer between 1 and 99 or left empty"
      },
      {
        "type": "TEXT",
        "name": "GA_compandaTradeName",
        "displayName": "Companda Trade Name",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaCocCode",
        "displayName": "Companda CoC Code",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLegalForm",
        "displayName": "Companda Legal Form",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLegalFormCode",
        "displayName": "Companda Legal Form Code",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaEmployeeRange",
        "displayName": "Companda Employee Range",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLocationStreetname",
        "displayName": "Companda Location Streetname",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLocationStreetnumber",
        "displayName": "Companda Location Streetnumber",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLocationZipcode",
        "displayName": "Companda Location Zipcode",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLocationCity",
        "displayName": "Companda Location City",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLocationCountryCode",
        "displayName": "Companda Location Country Code",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaNonMailing",
        "displayName": "Companda Non Mailing",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaBrancheDescriptionA",
        "displayName": "Companda Branche Description A",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaBrancheMainClass",
        "displayName": "Companda Branche Main Class",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaBrancheCodeMain",
        "displayName": "Companda Branche Code Main",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaBrancheCodeA",
        "displayName": "Companda Branche Code A",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaWebsite",
        "displayName": "Companda Website",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaLinkedin",
        "displayName": "Companda Linkedin",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaFacebook",
        "displayName": "Companda Facebook",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaTwitter",
        "displayName": "Companda Branche Code A",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaMeta",
        "displayName": "Companda Meta description",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "GA_compandaTech",
        "displayName": "Companda Tech details",
        "simpleValueType": true,
        "canBeEmptyString": true,
        "valueValidators": [
          {
            "type": "REGEX",
            "args": [
              "^$|^[1-9]$|^[1-9][0-9]$"
            ],
            "errorMessage": "The value must be an integer between 1 and 99 or left empty"
          }
        ]
      }
    ],
    "help": "When sending data to Google Analytics you need to map the fields to the correct custom dimension numbers. The custom dimension numbers can be found in the admin section of your Google Analytics configuration."
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const log=require('logToConsole');
const JSON=require('JSON');
const is=require('injectScript');
const qp=require('queryPermission');
const cq=require('createQueue');
const cfw=require('copyFromWindow');
const siw=require('setInWindow');
const sto=require('callLater');
var dlp=cq('dataLayer');
const l=(t) => {
    if (typeof t == 'object') {
        log("Companda stringify: " + JSON.stringify(t));
    } else {
        log("Companda: " + t);
    }
};
function cial(ca, cb) {
    if (cfw('ga.loaded')) {
        if (data.debug) {
            l("GA done loading, continue...");
        }
        rgp(ca, cb);
    } else {
        if (data.debug) {
            l("Waiting for GA 500");
        }
        sto(function() {
            cial(ca, cb);
        }, 500);
    }
}
function rgp(sd, sdr){
    var ga=cfw('ga');
    if (!ga) {
        l("Can't grab GA function from window");
    }
    if (data.debug) {
        l("GA plugin load attempt");
    }
    var mapping={
        compandaCompanyName:          'dimension'+data.GA_compandaCompanyName,
        compandaTradeName:            'dimension'+data.GA_compandaTradeName,
        compandaCocCode:              'dimension'+data.GA_compandaCocCode,
        compandaLegalForm:            'dimension'+data.GA_compandaLegalForm,
        compandaLegalFormCode:        'dimension'+data.GA_compandaLegalFormCode,
        compandaEmployeeRange:        'dimension'+data.GA_compandaEmployeeRange,
        compandaLocationStreetname:   'dimension'+data.GA_compandaLocationStreetname,
        compandaLocationStreetnumber: 'dimension'+data.GA_compandaLocationStreetnumber,
        compandaLocationZipcode:      'dimension'+data.GA_compandaLocationZipcode,
        compandaLocationCity:         'dimension'+data.GA_compandaLocationCity,
        compandaLocationCountryCode:  'dimension'+data.GA_compandaLocationCountryCode,
        compandaNonMailing:           'dimension'+data.GA_compandaNonMailing,
        compandaBrancheDescriptionA:  'dimension'+data.GA_compandaBrancheDescriptionA,
        compandaBrancheMainClass:     'dimension'+data.GA_compandaBrancheMainClass,
        compandaBrancheCodeMain:      'dimension'+data.GA_compandaBrancheCodeMain,
        compandaBrancheCodeA:         'dimension'+data.GA_compandaBrancheCodeA,
        compandaWebsite:              'dimension'+data.GA_compandaWebsite,
        compandaLinkedin:             'dimension'+data.GA_compandaLinkedin,
        compandaFacebook:             'dimension'+data.GA_compandaFacebook,
        compandaTwitter:              'dimension'+data.GA_compandaTwitter,
        compandaTech:                 'dimension'+data.GA_compandaTech,
        compandaDescription:          'dimension'+data.GA_compandaMeta
    };
    if (data.debug) {
        l("Mapping for GA set");
        l("Mapping: ");
        l(mapping);
    }
    var seeGAPlugin=function(tracker,config) {
        if (data.debug) {
            l('GA Plugin firing...');
        }
        var m=(sd.company_name != null);
        var dim={}; 
        if (data.debug) {
            l("Is company data available: ");
            l(sdr);
            l("here Company name: "+sdr.compandaCompanyName);
        }
        for(var d in mapping) {
            var dname=mapping[d];
            if (dname != 'dimension') {
                if (dname.length > 11) {
                    l("Dimension name error: "+dname);
                } else {
                    dim[dname]=(m) ? sdr[d] : '';
                }
                if (data.debug) {
                    l(""+d+"="+dname+"="+sdr[d]);
                }
            }
        }
        if(sd.company_name.length > 0 && sd.company_name != "N/A") {
            ga(function(tracker) {
                ga('set',dim);
                ga('send','event','Companda SEE event','Company Identified',sd.company_name,{
                    nonInteraction: true
                });
            });
            if (data.debug) {
                l("GA event called: Company Identified");
            }
        } else {
            ga(function(tracker) {
                ga('set',dim);
                ga('send','event','Companda SEE event','ISP Identified',undefined,{
                    nonInteraction: true
                });
            });
            if (data.debug) {
                l("GA event called: ISP");
            }
        }
        if (data.debug) {
            l('GA Plugin done.');
        }
    };
    ga(function() {
        if (data.debug) {
            l("Trying tracker creation in GA for: "+data.UAtrackingID);
        }
        var tracker=ga('create', data.UAtrackingID,'auto');
        if (data.debug) {
            l("GA tracker created:"+tracker);
        }
        seeGAPlugin(tracker);
    });
}
var boostReadyCallback=function(sd) {
    if (data.debug) {
        l('callback=');
        l(sd);
        l('SEE length='+sd.company_name.length);
    }
    var sdr={
        'compandaCompanyName':          sd.company_name,
        'compandaTradeName':            sd.trade_name,
        'compandaCocCode':              sd.coc_code,
        'compandaLegalForm':            sd.legal_form,
        'compandaLegalFormCode':        sd.legal_form_code,
        'compandaEmployeeRange':        sd.employees_range,
        'compandaLocationStreetname':   sd.location_streetname,
        'compandaLocationStreetnumber': sd.location_streetnum,
        'compandaLocationZipcode':      sd.location_postalcode,
        'compandaLocationCity':         sd.location_city,
        'compandaLocationCountryCode':  sd.location_countrycode,
        'compandaNonMailing':           sd.nmi,
        'compandaBrancheDescriptionA':  sd.industry_sector_a,
        'compandaBrancheMainClass':     sd.industry_class,
        'compandaBrancheCodeMain':      sd.industry_main,
        'compandaBrancheCodeA':         sd.industry_sector_a_code,
        'compandaWebsite':              sd.website,
        'compandaLinkedin':             sd.linkedin,
        'compandaFacebook':             sd.facebook,
        'compandaTwitter':              sd.twitter,
        'compandaTech':                 sd.tech,
        'compandaDescription':          sd.meta
    };
    dlp(sdr);
    if(sd.company_name.length > 0 && sd.company_name != "N/A") {
        dlp({'compandaEventLabel': "Company Identified"});
    } else {
        dlp({'compandaEventLabel': "ISP Identified"});
    }
    if (data.FireDataReadyEvent) {
        if (data.debug) {
        l("Sending 'Companda dataLayer ready' event to dataLayer");
        }
        dlp({
        'event': 'Companda dataLayer ready'
        });
    }
    if (data.FireGAplugin) {
        cial(sd, sdr);
    }
};
siw('boostReadyCallback',boostReadyCallback);
const onSuccess=() => {
    if (data.debug) {
        l('SEE Plugin loaded successfully.');
    }
    data.gtmOnSuccess();
};
const onFailure=() => {
    l('SEE Plugin load failed.');
    data.gtmOnFailure();
};
const public_key=data.compandaPublicKey;
var url=data.compandaAPIendpoint + public_key + '?debug=' + data.debug;
if (data.debug) {
    l("Set debugging on template and url");
    l("API url:"+url);
    l("Inject permission: "+qp('inject_script',url));
}
if (qp('inject_script',url)) {
    if (data.debug) {
        l('load attempt');
    }
    is(url,onSuccess,onFailure);
} else {
    l('load failed due to permissions mismatch.');
    data.gtmOnFailure();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "all"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://*.companda.com/"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "dataLayer"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "boost"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "boostFilterResults"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "boostReadyCallback"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "providePlugin"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "seeGAPlugin"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga.getAll"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga_debug"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              },
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "ga.loaded"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []
setup: ''


___NOTES___

Created on 11/17/2020, 3:49:33 PM


